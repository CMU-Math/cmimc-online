{% extends 'base.html' %}

{% block content %}

{% if ongoing %}
  <p class="display-4">Ongoing Contests</p>
  <hr class="red_line mb-4"/>
  <div class="card-deck-wrapper mb-5">
    {% for t in ongoing %}
      {% include 'includes/contest_card.html' %}
    {% endfor %}
  </div>
{% endif %}

{% if upcoming %}
  <p class="display-4">Upcoming Contests</p>
  <hr class="red_line mb-4"/>
  <div class="card-deck-wrapper mb-5">
    {% for t in upcoming %}
      {% include 'includes/contest_card.html' %}
    {% endfor %}
  </div>
{% endif %}

{% if past %}
  <p class="display-4">Past Contests</p>
  <hr class="red_line mb-4"/>
  <div class="card-deck-wrapper">
    {% for t in past %}
    {% include 'includes/contest_card.html' %}
    {% endfor %}
  </div>
{% endif %}

{% if not ongoing and not upcoming and not past %}
  No contests yet.
{% endif %}

{% if user.is_staff %}
<h1 class="mt-5">Staff Info Only (regular users can't see this)</h1>
<hr class="red_line mb-4"/>
<h3>All Emails (students and coaches with an account on this website)</h3>
<p>{{ emaillist }}</p>

<h3>Programming Contest member count</h3>
<p>{{ member_count }}</p>

<h3>Re-register all teams in a contest</h3>
<hr class="red_line mb-4"/>
<p>(resets all competitors, scores and taskscores)</p>

<form method="post" class="mb-4">
      {% csrf_token %}
      <div class="form-group">
        <input type="number" class="form-contest-id" name="finalize_all_teams">
      </div>
      <button type="submit" class="btn btn-primary">Re-register all teams</button>
</form>

<h3>Init all tasks</h3>
<hr class="red_line mb-4"/>
<form method="post">
      {% csrf_token %}
      <button type="submit" class="btn btn-primary" name="init_all_tasks">Init All Tasks</button>
</form>

{% endif %}

{% endblock %}
